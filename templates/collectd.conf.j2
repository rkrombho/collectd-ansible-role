# This file was generated by Ansible for {{ansible_fqdn}}
# Do NOT modify this file by hand!

# General options
Interval     {{ collectd_interval }}
ReadThreads  {{ collectd_readthreads }}
TypesDB     "/opt/collectd/share/collectd/types.db"
BaseDir     "/opt/collectd/var/lib/collectd"
PIDFile     "/opt/collectd/var/run/collectd.pid"
PluginDir   "/opt/collectd/lib/collectd"

{% if collectd_hostname %}Hostname "{{ collectd_hostname }}"
{% endif %}
FQDNLookup {{ 'true' if collectd_fdqnlookup else 'false' }}

# Logging
{% if collectd_logpath %}
LoadPlugin logfile
<Plugin logfile>
        LogLevel "{{collectd_loglevel}}"
        File "{{collectd_logpath}}"
        Timestamp true
</Plugin>
{% else %}
LoadPlugin syslog
{% endif %}

# Default plugins
{% for plugin in collectd_default_plugins %}
LoadPlugin {{ plugin }}
{% if collectd_default_plugins_options.get(plugin) %}
<Plugin {{plugin}}>
{% for line in collectd_default_plugins_options[plugin] %}
	{{line}}
{% endfor %}
</Plugin>
{% endif %}
{% endfor %}

# User plugins
{% for plugin in collectd_plugins %}
LoadPlugin {{ plugin }}
{% if collectd_plugins_options.get(plugin) %}
<Plugin {{plugin}}>
{% for line in collectd_plugins_options[plugin] %}
	{{line}}
{% endfor %}
</Plugin>
{% endif %}
{% endfor %}

{% if collectd_write_graphite %}
# Carbon
LoadPlugin write_graphite
<Plugin write_graphite>
  <Node "{{inventory_hostname}}">
{% for name, value in collectd_write_graphite_options.items() %}
  {% if value is string %}
    {{ name }} "{{ value }}"
  {% else %}
    {{ name }} {{ value|lower }}
  {% endif %}
{% endfor %}
  </Node>
</Plugin>
{% endif %}
